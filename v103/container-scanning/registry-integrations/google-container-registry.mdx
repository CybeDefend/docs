---
title: "Google Container Registry (GCR)"
description: "Scan container images stored in Google Container Registry with secure authentication and access controls."
---

**Google Container Registry (GCR)** is Google Cloud's managed Docker registry service. CybeDefend integrates with GCR to scan your private container images for vulnerabilities using secure service account authentication.

## Features

- **Service Account Authentication**: Secure access using Google Cloud service accounts
- **Multi-Region Support**: Access images from all GCR regions (gcr.io, us.gcr.io, eu.gcr.io, asia.gcr.io)
- **IAM Integration**: Leverage Google Cloud IAM for fine-grained access control
- **Project Isolation**: Scan images from specific Google Cloud projects
- **Artifact Registry Support**: Compatible with the newer Google Artifact Registry

## Setup Requirements

To connect your Google Container Registry:

1. **Google Cloud Project**: Active GCP project with Container Registry enabled
2. **Service Account**: Service account with `Storage Object Viewer` role
3. **JSON Key File**: Service account credentials in JSON format
4. **Registry Access**: Proper IAM permissions for registry access

## CybeDefend Configuration

When connecting your Google Container Registry in CybeDefend, you'll need to provide:

| Field | Description | Example |
|-------|-------------|---------|
| **ID du projet GCP** | Your Google Cloud project ID | `my-gcp-project-123` |
| **Nom d'hôte du registre** | GCR hostname for your region | `gcr.io (Global/US)` |
| **Clé du compte de service (JSON)** | Full JSON content of service account key | `{"type": "service_account", ...}` |

### Available Registry Hostnames

| Hostname | Region |
|----------|--------|
| `gcr.io` | Global / United States |
| `us.gcr.io` | United States |
| `eu.gcr.io` | Europe |
| `asia.gcr.io` | Asia |

## How to Create a Service Account Key

<Steps>
  <Step title="Access GCP Console">
    Go to GCP Console → **IAM & Admin** → **Service Accounts**
  </Step>
  
  <Step title="Create or Select Account">
    Create a new service account or select an existing one
  </Step>
  
  <Step title="Assign Role">
    Grant the role **Storage Object Viewer** (read access) or **Storage Admin** (read/write)
  </Step>
  
  <Step title="Create Key">
    Create a new key in **JSON format** and download it
  </Step>
  
  <Step title="Paste JSON Content">
    Paste the complete JSON content in CybeDefend
  </Step>
</Steps>

<Warning>
The service account key JSON file contains sensitive credentials. Store it securely and never commit it to version control.
</Warning>

## Registry URL Formats

GCR supports multiple regional endpoints:

```
# Global registry
gcr.io/project-id/image:tag

# Regional registries
us.gcr.io/project-id/image:tag    # United States
eu.gcr.io/project-id/image:tag    # Europe
asia.gcr.io/project-id/image:tag  # Asia
```

## Authentication Methods

<Tabs>
  <Tab title="Service Account Key">
    ```json
    {
      "type": "service_account",
      "project_id": "your-project-id",
      "private_key_id": "key-id",
      "private_key": "-----BEGIN PRIVATE KEY-----\n...",
      "client_email": "scanner@your-project.iam.gserviceaccount.com",
      "client_id": "client-id",
      "auth_uri": "https://accounts.google.com/o/oauth2/auth",
      "token_uri": "https://oauth2.googleapis.com/token"
    }
    ```
  </Tab>
  
  <Tab title="Application Default Credentials">
    For GCP-hosted environments, use Application Default Credentials:
    ```bash
    gcloud auth application-default login
    ```
  </Tab>
</Tabs>

## Google Artifact Registry

For newer Google Artifact Registry repositories:

```
# Artifact Registry format
region-docker.pkg.dev/project-id/repository/image:tag

# Example
us-central1-docker.pkg.dev/my-project/my-repo/app:latest
```

## Integration with Google Cloud Build

Scan images built with Google Cloud Build:

```yaml
# cloudbuild.yaml
steps:
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.io/$PROJECT_ID/my-app:$SHORT_SHA', '.']
  
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'gcr.io/$PROJECT_ID/my-app:$SHORT_SHA']
  
  # Trigger CybeDefend scan
  - name: 'gcr.io/cloud-builders/curl'
    args: 
      - '-X'
      - 'POST'
      - '$_CYBEDEFEND_WEBHOOK'
      - '-d'
      - 'image=gcr.io/$PROJECT_ID/my-app:$SHORT_SHA'
```

## Security Best Practices

<CardGroup cols={2}>
  <Card title="Least Privilege" icon="shield">
    Grant minimal required permissions to service accounts
  </Card>
  
  <Card title="Key Rotation" icon="rotate">
    Regularly rotate service account keys for security
  </Card>
  
  <Card title="Audit Logging" icon="clipboard-list">
    Enable Cloud Audit Logs for registry access monitoring
  </Card>
  
  <Card title="Network Security" icon="lock">
    Use VPC Service Controls for additional network isolation
  </Card>
</CardGroup>

## Troubleshooting

**Authentication Failures**:
- Verify service account key is valid and not expired
- Check that the service account has proper IAM roles
- Ensure the project ID matches your registry

**Permission Errors**:
- Confirm `Storage Object Viewer` role is assigned
- Check if Container Registry API is enabled
- Verify project-level permissions

**Network Issues**:
- Ensure firewall allows HTTPS traffic to gcr.io
- Check VPC configurations for outbound connectivity
- Verify DNS resolution for GCR endpoints

<Warning>
Store your service account JSON keys securely and never commit them to version control. Use secret management systems for production environments.
</Warning>

---

**Related:** [Container Image Scanning](/v103/container-scanning/container-image-scanning) · [Azure ACR](/v103/container-scanning/registry-integrations/azure-container-registry) · [Amazon ECR](/v103/container-scanning/registry-integrations/amazon-ecr)
